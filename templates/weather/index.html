<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Channel - Local Forecast</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/retro-weather.css' %}">
</head>
<body>
    <!-- Scrolling Weather Alerts Bar -->
    <div class="alerts-bar">
        <div class="alerts-container">
            <div class="alerts-ticker" id="alertsTicker">
                <span class="alert-text">‚ö†Ô∏è WEATHER ALERTS</span>
                <span class="alert-text">‚Ä¢ LOCAL FORECAST UPDATED EVERY 10 MINUTES ‚Ä¢</span>
                <span class="alert-text">‚Ä¢ CURRENT CONDITIONS FOR YOUR AREA ‚Ä¢</span>
                <span class="alert-text">‚Ä¢ VISIT WEATHER.COM FOR MORE INFORMATION ‚Ä¢</span>
                <span class="alert-text">‚ö†Ô∏è WEATHER ALERTS</span>
                <span class="alert-text">‚Ä¢ LOCAL FORECAST UPDATED EVERY 10 MINUTES ‚Ä¢</span>
                <span class="alert-text">‚Ä¢ CURRENT CONDITIONS FOR YOUR AREA ‚Ä¢</span>
                <span class="alert-text">‚Ä¢ VISIT WEATHER.COM FOR MORE INFORMATION ‚Ä¢</span>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <header class="main-header">
        <div class="header-content">
            <h1 class="channel-logo">THE WEATHER CHANNEL</h1>
            <p class="tagline">Local on the 8s</p>
            <a href="{% url 'random_weather' %}" class="random-weather-link">üåé See Random Place's Weather</a>
        </div>
    </header>

    <!-- Top Cities Section -->
    <section class="top-cities">
        <h3>üåç Top Cities</h3>
        <div class="top-cities-list">
            {% for top_city in top_cities %}
                <a href="{% url 'search_weather' %}?city={{ top_city }}" class="top-city-link">{{ top_city }}</a>
            {% endfor %}
        </div>
    </section>
    <!-- Current Time Display -->
    <div class="time-display">
        <div id="currentTime"></div>
    </div>

    <!-- Search Section -->
    <section class="search-section">
        <div class="search-container">
            <form action="{% url 'search_weather' %}" method="get" class="search-form">
                <input 
                    type="text" 
                    name="city" 
                    placeholder="Enter your city..." 
                    value="{{ city }}"
                    class="search-input"
                    required
                >
                <button type="submit" class="search-button">GET WEATHER</button>
            </form>
        </div>
    </section>

    {% if error %}
    <!-- Error Message -->
    <div class="error-message">
        <p>‚ö†Ô∏è {{ error }}</p>
    </div>
    {% endif %}

    {% if weather_data %}
    {% if weather_data.alerts and weather_data.alerts|length > 0 %}
    <section class="weather-warnings">
        <h3>‚ö†Ô∏è Weather Warnings</h3>
        <ul>
        {% for alert in weather_data.alerts %}
            <li><strong>{{ alert.event }}</strong>: {{ alert.description }}</li>
        {% endfor %}
        </ul>
    </section>
    {% endif %}
    {% if nearby_cities and nearby_cities|length > 0 %}
    <section class="nearby-cities">
        <h3>Nearby Cities</h3>
        <ul>
        {% for ncity in nearby_cities %}
            <li><a href="{% url 'search_weather' %}?city={{ ncity.name }}">{{ ncity.name }}, {{ ncity.country }} ({{ ncity.temperature }}¬∞C)</a></li>
        {% endfor %}
        </ul>
    </section>
    {% endif %}
    <!-- Main Weather Display -->
    <main class="weather-main">
        <!-- Current Conditions Panel -->
        <div class="current-conditions">
            <div class="location-header">
                <h2>{{ weather_data.city }}, {{ weather_data.country }}</h2>
                <p class="update-time">AS OF <span id="updateTime"></span></p>
            </div>

            <div class="current-temp-display">
                <div class="temp-large">
                    <span class="temperature">{{ weather_data.temperature }}¬∞</span>
                    <span class="temp-unit">C</span>
                </div>
                <div class="condition-info">
                    <p class="condition-text">{{ weather_data.description }}</p>
                    <p class="feels-like">FEELS LIKE {{ weather_data.feels_like }}¬∞C</p>
                </div>
            </div>
        </div>

        <!-- Weather Details Grid -->
        <div class="weather-details-grid">
            <div class="detail-box">
                <div class="detail-icon">üíß</div>
                <div class="detail-content">
                    <span class="detail-label">HUMIDITY</span>
                    <span class="detail-value">{{ weather_data.humidity }}%</span>
                </div>
            </div>

            <div class="detail-box">
                <div class="detail-icon">üí®</div>
                <div class="detail-content">
                    <span class="detail-label">WIND SPEED</span>
                    <span class="detail-value">{{ weather_data.wind_speed }} km/h</span>
                </div>
            </div>

            <div class="detail-box">
                <div class="detail-icon">üå°Ô∏è</div>
                <div class="detail-content">
                    <span class="detail-label">FEELS LIKE</span>
                    <span class="detail-value">{{ weather_data.feels_like }}¬∞C</span>
                </div>
            </div>

            <div class="detail-box">
                <div class="detail-icon">üå§Ô∏è</div>
                <div class="detail-content">
                    <span class="detail-label">CONDITIONS</span>
                    <span class="detail-value conditions-value">{{ weather_data.description }}</span>
                </div>
            </div>
        </div>

        <!-- Weather Explanations Section -->
        <div class="explanations-section">
            <h3 class="section-title">UNDERSTANDING YOUR WEATHER</h3>
            
            <div class="explanation-card">
                <h4>üå°Ô∏è Temperature</h4>
                <p>Current temperature is <strong>{{ weather_data.temperature }}¬∞C</strong>. This measures the warmth or coldness of the air around you.</p>
            </div>

            <div class="explanation-card">
                <h4>ü§î Feels Like Temperature</h4>
                <p>It feels like <strong>{{ weather_data.feels_like }}¬∞C</strong>. This accounts for wind chill and humidity, giving you a more accurate sense of how it feels outside.</p>
            </div>

            <div class="explanation-card">
                <h4>üíß Humidity</h4>
                <p>Humidity is at <strong>{{ weather_data.humidity }}%</strong>. This shows how much moisture is in the air. Higher humidity makes it feel warmer and can make you feel sticky.</p>
            </div>

            <div class="explanation-card">
                <h4>üí® Wind Speed</h4>
                <p>Wind is blowing at <strong>{{ weather_data.wind_speed }} km/h</strong>. Wind affects how cold it feels and can make umbrellas difficult to use!</p>
            </div>
        </div>
    </main>
    {% else %}
    <!-- Welcome Message -->
    <div class="welcome-section">
        <div class="welcome-content">
            <h2>WELCOME TO THE WEATHER CHANNEL</h2>
            <p class="welcome-text">Enter your city above to get your local forecast</p>
            <div class="welcome-icons">
                <span class="weather-icon">‚òÄÔ∏è</span>
                <span class="weather-icon">‚õÖ</span>
                <span class="weather-icon">üåßÔ∏è</span>
                <span class="weather-icon">‚õàÔ∏è</span>
                <span class="weather-icon">‚ùÑÔ∏è</span>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Bottom Info Bar -->
    <footer class="bottom-bar">
        <div class="bottom-content">
            <span>LOCAL FORECAST</span>
            <span>‚Ä¢</span>
            <span>UPDATED CONTINUOUSLY</span>
            <span>‚Ä¢</span>
            <span>WEATHER.COM</span>
        </div>
    </footer>

    <script src="{% static 'js/retro-weather.js' %}"></script>
</body>
</html>
